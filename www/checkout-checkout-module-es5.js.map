{"version":3,"sources":["webpack:///src/app/checkout/checkout.page.html","webpack:///src/app/checkout/checkout-routing.module.ts","webpack:///src/app/checkout/checkout.module.ts","webpack:///src/app/checkout/checkout.page.scss","webpack:///src/app/checkout/checkout.page.ts"],"names":["routes","path","component","CheckoutPageRoutingModule","imports","forChild","exports","CheckoutPageModule","declarations","CheckoutPage","fun","loadingCtrl","route","shopService","authService","channels","random_id","Math","floor","Date","now","getUserAddress","getParameter","userName","currentUserDataValue","name","userEmail","email","queryParams","subscribe","params","resp","msg","fire","navigate","create","cssClass","message","mode","loading","present","sid","GetCartDefaultAddress","res","dismiss","code","useraddress","data","presentToast","error","event","selectedPaymentMethod","detail","value","pay_amount","CalculatePercentage","totalamount","shiptypeId","undefined","processOrder","id","errorSwt","title","text","timer","timerProgressBar","icon","paytype","addressid","String","done","result","public_key","ref","status","placeOrder","reference","transaction","selector","template"],"mappings":"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","file":"checkout-checkout-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"mytheme\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button color=\\\"light\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title color=\\\"light\\\">CheckOut</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n  <ion-list>\\n    <ion-list-header color=\\\"light\\\">\\n      <ion-label class=\\\"ion-no-margin ion-margin-bottom ion-margin-top ion-no-padding\\\">Select Delivery Method</ion-label>\\n    </ion-list-header>\\n    <ion-radio-group (ionChange)=\\\"onSelectShipType($event)\\\">\\n      <ion-item>\\n        <ion-label>\\n          <ion-row class=\\\"full ion-align-items-center\\\">\\n            <ion-col size=\\\"10\\\">\\n              <ion-row class=\\\"ion-align-items-center\\\">\\n                <p class=\\\"ion-no-margin\\\"><strong>Door Step Delivery</strong></p>\\n              </ion-row>\\n              <ion-row class=\\\"ion-align-items-center\\\">\\n                <p class=\\\"small ion-no-margin\\\">Deliver to my door step</p>\\n                <h6 class=\\\"small mycolor ion-padding-start ion-no-margin\\\">DEFAULT</h6>\\n              </ion-row>\\n            </ion-col>\\n          </ion-row>\\n        </ion-label>\\n        <ion-radio slot=\\\"start\\\" value=\\\"1\\\" checked></ion-radio>\\n      </ion-item>\\n      <ion-item disabled=\\\"true\\\">\\n        <ion-label>\\n          <ion-row class=\\\"full ion-align-items-center\\\">\\n            <ion-col size=\\\"10\\\">\\n              <ion-row class=\\\"ion-align-items-center\\\">\\n                <p class=\\\"ion-no-margin\\\"><strong>PickUp Center</strong></p>\\n              </ion-row>\\n              <ion-row class=\\\"ion-align-items-center\\\">\\n                <p class=\\\"small ion-no-margin\\\">Select a pickup Center </p>\\n                <h6 class=\\\"small mycolor ion-padding-start ion-no-margin\\\">PRIMARY</h6>\\n              </ion-row>\\n            </ion-col>\\n          </ion-row>\\n        </ion-label>\\n        <ion-radio slot=\\\"start\\\" value=\\\"2\\\" checked></ion-radio>\\n      </ion-item>\\n\\n    </ion-radio-group>\\n  </ion-list>\\n  <ion-list>\\n    <ion-list-header color=\\\"light\\\" class=\\\"ion-justify-content-center\\\">\\n      <ion-label class=\\\"ion-no-margin ion-margin-bottom ion-margin-top ion-no-padding\\\">Delivery Address</ion-label>\\n    </ion-list-header>\\n    <ion-item>\\n      <ion-label>\\n        <ion-row class=\\\"ion-align-items-center\\\">\\n          <p class=\\\"ion-no-margin\\\"><strong>{{useraddress?.addresstypename}} Address</strong></p>\\n          <h6 class=\\\"small mycolor ion-padding-start\\\" *ngIf=\\\"useraddress?.default_address === '1'\\\">Default</h6>\\n        </ion-row>\\n        <ion-row>\\n          <p class=\\\"ion-no-margin ion-wrap\\\">{{useraddress?.address_line}} {{useraddress?.close_to}},\\n            {{useraddress?.streetname}}</p>\\n        </ion-row>\\n        <ion-row>\\n          <p class=\\\"ion-no-margin\\\">{{useraddress?.busname}}</p>\\n        </ion-row>\\n        <ion-row>\\n          <p class=\\\"ion-no-margin\\\">{{useraddress?.townname}}</p>\\n        </ion-row>\\n        <ion-row>\\n          <p class=\\\"ion-no-margin\\\">{{useraddress?.lganame}}</p>\\n        </ion-row>\\n        <ion-row>\\n          <p class=\\\"ion-no-margin\\\">{{useraddress?.statename}}</p>\\n        </ion-row>\\n        <ion-row>\\n          <p class=\\\"ion-no-margin\\\">{{useraddress?.phone}}</p>\\n        </ion-row>\\n        <ion-row>\\n          <p class=\\\"ion-no-margin\\\">{{useraddress?.postal_code}}</p>\\n        </ion-row>\\n      </ion-label>\\n    </ion-item>\\n    <ion-row class=\\\"ion-justify-content-center ion-padding-top ion-padding-bottom\\\">\\n      <ion-text color=\\\"mytheme\\\" (click)=\\\"addAddress()\\\">\\n        Use Another Address\\n      </ion-text>\\n    </ion-row>\\n  </ion-list>\\n\\n\\n  <ion-list>\\n    <ion-list-header color=\\\"light\\\" class=\\\"ion-justify-content-center\\\">\\n      <ion-label class=\\\"ion-no-margin ion-margin-bottom ion-margin-top ion-no-padding\\\">Select Payment Method</ion-label>\\n    </ion-list-header>\\n    <ion-radio-group (ionChange)=\\\"onSelectPayMeth($event)\\\">\\n      <ion-item>\\n        <ion-label>\\n          <ion-row class=\\\"full ion-align-items-center\\\">\\n            <ion-col size=\\\"10\\\">\\n              <ion-row class=\\\"ion-align-items-center\\\">\\n                <p class=\\\"ion-no-margin\\\"><strong>Pay via FynPay?</strong></p>\\n              </ion-row>\\n              <ion-row class=\\\"ion-align-items-center\\\">\\n                <p class=\\\"small ion-no-margin\\\">Pay from your FynPay Account </p>\\n                <h6 class=\\\"small mycolor ion-padding-start ion-no-margin\\\"></h6>\\n              </ion-row>\\n            </ion-col>\\n          </ion-row>\\n        </ion-label>\\n        <ion-radio slot=\\\"start\\\" value=\\\"fynpay\\\" checked></ion-radio>\\n      </ion-item>\\n      <ion-item>\\n        <ion-label>\\n          <ion-row class=\\\"full ion-align-items-center\\\">\\n            <ion-col size=\\\"10\\\">\\n              <ion-row class=\\\"ion-align-items-center\\\">\\n                <p class=\\\"ion-no-margin\\\"><strong>Pay via PayStack?</strong></p>\\n              </ion-row>\\n              <ion-row class=\\\"ion-align-items-center\\\">\\n                <p class=\\\"small ion-no-margin\\\">Pay with your Card Details </p>\\n                <h6 class=\\\"small mycolor ion-padding-start ion-no-margin\\\"></h6>\\n              </ion-row>\\n            </ion-col>\\n          </ion-row>\\n        </ion-label>\\n\\n        <ion-radio slot=\\\"start\\\" value=\\\"paystack\\\" checked></ion-radio>\\n      </ion-item>\\n    </ion-radio-group>\\n  </ion-list>\\n  <ion-list>\\n    <div class=\\\"add-payment-div\\\">\\n      <ion-grid>\\n        <ion-row>\\n          <ion-col size=\\\"2\\\">\\n            <ion-icon name=\\\"lock-closed-sharp\\\" class=\\\"icon ion-margin-top\\\"></ion-icon>\\n          </ion-col>\\n          <ion-col>\\n            <h5 class=\\\"ion-no-margin\\\" class=\\\"label\\\">Secure Payment</h5>\\n            <h6 class=\\\"small\\\">Trusted by over 500 million shoppers</h6>\\n          </ion-col>\\n        </ion-row>\\n      </ion-grid>\\n    </div>\\n  </ion-list>\\n\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar color=\\\"mytheme\\\" (click)=\\\"onPlaceOrder()\\\" *ngIf=\\\"selectedPaymentMethod === 'fynpay' && shiptypeId !== undefined\\\">\\n    <ion-title color=\\\"light\\\">Place Order</ion-title>\\n  </ion-toolbar>\\n\\n  <ion-toolbar *ngIf=\\\"selectedPaymentMethod === 'paystack' && shiptypeId !== undefined\\\" color=\\\"mytheme\\\"\\n    angular4-paystack [key]=\\\"public_key\\\" (paymentInit)=\\\"paymentInit()\\\" [email]=\\\"userEmail\\\" [amount]=\\\"pay_amount * 100\\\"\\n    [ref]=\\\"random_id\\\" [channels]=\\\"channels\\\" (close)=\\\"paymentCancel()\\\" (callback)=\\\"paymentDone($event)\\\"\\n    (click)=\\\"onPay()\\\" [metadata]=\\\"{ \\n    custom_fields: \\n    [ {\\n      display_name: 'Customer Name', \\n      variable_name: 'Customer Name', \\n      value: userName } ,\\n    {\\n      display_name: 'Payment Type', \\n      variable_name: 'Payment Type', \\n      value: 'Order Checkout Payment' \\n    }] \\n  }\\\">\\n    <ion-title color=\\\"light\\\">Pay & Place Order</ion-title>\\n  </ion-toolbar>\\n</ion-footer>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CheckoutPage } from './checkout.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CheckoutPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CheckoutPageRoutingModule {}\n","import { Angular4PaystackModule } from 'angular4-paystack';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CheckoutPageRoutingModule } from './checkout-routing.module';\n\nimport { CheckoutPage } from './checkout.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    Angular4PaystackModule,\n    IonicModule,\n    CheckoutPageRoutingModule\n  ],\n  declarations: [CheckoutPage]\n})\nexport class CheckoutPageModule {}\n","export default \".input {\\n  border: 0.5px solid #d2d2d2;\\n  background-color: rgba(240, 240, 240, 0.5);\\n  border-radius: 3px;\\n  font-size: 0.9em !important;\\n}\\n\\n.label {\\n  font-size: 12px;\\n}\\n\\n.small {\\n  font-size: 9px;\\n  color: #787878;\\n}\\n\\n.icon {\\n  font-size: 21px;\\n}\\n\\n.bottom {\\n  position: absolute;\\n  bottom: 10px;\\n  width: 90%;\\n  left: 50%;\\n  transform: translate(-50%, 0%);\\n}\\n\\n.add-payment-div {\\n  border: 1px solid #ddd;\\n  margin-bottom: 10px;\\n  padding: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hlY2tvdXQvY2hlY2tvdXQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksMkJBQUE7RUFDQSwwQ0FBQTtFQUNBLGtCQUFBO0VBQ0EsMkJBQUE7QUFDSjs7QUFDQTtFQUNJLGVBQUE7QUFFSjs7QUFBQTtFQUNJLGNBQUE7RUFDQSxjQUFBO0FBR0o7O0FBREE7RUFDSSxlQUFBO0FBSUo7O0FBRkE7RUFDSSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0VBQ0EsU0FBQTtFQUNBLDhCQUFBO0FBS0o7O0FBSEE7RUFDSSxzQkFBQTtFQUNBLG1CQUFBO0VBQ0EsYUFBQTtBQU1KIiwiZmlsZSI6InNyYy9hcHAvY2hlY2tvdXQvY2hlY2tvdXQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmlucHV0IHtcbiAgICBib3JkZXI6IC41cHggc29saWQgcmdiKDIxMCwgMjEwLCAyMTApO1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjQwLCAyNDAsIDI0MCwgLjUpO1xuICAgIGJvcmRlci1yYWRpdXM6IDNweDtcbiAgICBmb250LXNpemU6IC45ZW0gIWltcG9ydGFudDtcbn1cbi5sYWJlbCB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xufVxuLnNtYWxsIHtcbiAgICBmb250LXNpemU6IDlweDtcbiAgICBjb2xvcjogcmdiKDEyMCwgMTIwLCAxMjApO1xufVxuLmljb24ge1xuICAgIGZvbnQtc2l6ZTogMjFweDtcbn1cbi5ib3R0b20ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3R0b206IDEwcHg7XG4gICAgd2lkdGg6IDkwJTtcbiAgICBsZWZ0OiA1MCU7XG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgMCUpO1xufVxuLmFkZC1wYXltZW50LWRpdntcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkO1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgcGFkZGluZzogMTBweDtcbn1cbiJdfQ== */\";","import { FunctionsService } from './../services/functions.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { AuthServiceService } from './../authenticate/service/auth-service.service';\nimport { ShopService } from './../home/service/shop.service';\nimport { LoadingController } from '@ionic/angular';\nimport { Component, OnInit } from '@angular/core';\nimport Swal from 'sweetalert2';\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.page.html',\n  styleUrls: ['./checkout.page.scss'],\n})\nexport class CheckoutPage implements OnInit {\n  sid: any;\n  userName: any;\n  userEmail: any;\n  selectedPaymentMethod: any;\n  shiptypeId: any;\n  useraddress: any;\n  pay_amount: any;\n  public public_key: any;\n  resp: any;\n  public channels = ['card']; //Paystack Payment Methods\n  public random_id = Math.floor(Date.now() / 1000); //Line to generate reference number\n  constructor(private fun: FunctionsService, private loadingCtrl: LoadingController,\n    private route: ActivatedRoute,\n    private shopService: ShopService, private authService: AuthServiceService,\n  ) { }\n\n  ngOnInit() {\n    this.getUserAddress();\n    this.getParameter();\n    this.userName = this.authService.currentUserDataValue.name;\n    this.userEmail = this.authService.currentUserDataValue.email;\n    this.route.queryParams.subscribe(params => {\n      this.resp = params;\n    });\n  }\n\n  addAddress() {\n\n  }\n\n  done(msg) {\n    Swal.fire('Order', msg, 'success');\n    this.fun.navigate('home', false);\n  }\n\n  async getUserAddress() {\n    const loading = await this.loadingCtrl.create({\n      cssClass: 'my-custom-class',\n      message: 'Please wait...',\n      mode:'ios'\n    });\n    await loading.present();\n    this.sid = this.authService.currentUserDataValue.sid;\n    this.shopService.GetCartDefaultAddress(this.sid)\n      .subscribe(res => {\n        loading.dismiss().catch(() => { });\n        if (res.code === 200) {\n          this.useraddress = res.data;\n        } else {\n          this.fun.presentToast(res.msg);\n        }\n      }, error => {\n        loading.dismiss().catch(() => { });\n      })\n  }\n\n  onSelectPayMeth(event) {\n    this.selectedPaymentMethod = event.detail.value;\n    this.pay_amount = this.fun.CalculatePercentage(this.resp.totalamount);\n  }\n  onSelectShipType(event) {\n    this.shiptypeId = event.detail.value;\n  }\n  onPlaceOrder() {\n    if (this.shiptypeId !== undefined) {\n      if (this.selectedPaymentMethod !== undefined) {\n        if (this.selectedPaymentMethod === 'fynpay') {\n          this.processOrder('FynPay', this.shiptypeId, this.useraddress.id);\n        }\n      } else {\n        this.errorSwt('Please, select a Payment Method');\n      }\n    } else {\n      this.errorSwt('Please, select a Shipping Method');\n    }\n\n  }\n\n  errorSwt(msg) {\n    Swal.fire({\n      title: 'CheckOut!',\n      text: msg,\n      timer: 2000,\n      timerProgressBar: true,\n      icon: 'error'\n    });\n  }\n  async processOrder(paytype, shiptypeId, addressid) {\n    const loading = await this.loadingCtrl.create({\n      cssClass: 'my-custom-class',\n      message: 'Please wait...',\n      mode:'ios'\n    });\n    await loading.present();\n    this.sid = this.authService.currentUserDataValue.sid;\n    this.shopService.processOrder(String(this.sid), paytype, String(shiptypeId), String(addressid))\n      .subscribe(res => {\n        loading.dismiss().catch(() => { });\n        if (res.code === 200) {\n          this.done(res.msg);\n        } else {\n          this.errorSwt(res.msg)\n        }\n      }, error => {\n        loading.dismiss().catch(() => { });\n      })\n  }\n\n  getParameter() {\n    this.shopService.getParameter()\n      .subscribe(result => {\n        this.public_key = result.data;\n      })\n  }\n  paymentInit() {\n\n  }\n\n  onPay() {\n    this.fun.presentToast('Please Wait ...');\n  }\n\n  paymentCancel() {\n    this.errorSwt('You cancelled the payment!');\n  }\n \n  async paymentDone(ref: any) {\n    if (ref.status === 'success') {\n      //ref contains the response from paystack after successful payment\n      const loading = await this.loadingCtrl.create({\n        cssClass: 'my-custom-class',\n        message: 'Please wait...',\n        mode:'ios'\n      });\n      await loading.present();\n      this.sid = this.authService.currentUserDataValue.sid;\n      this.shopService.placeOrder(String(this.sid), 'CheckOut Payment', String(this.shiptypeId), String(this.useraddress.id),\n        String(this.resp.totalamount), String(ref.reference), String(ref.transaction))\n        .subscribe(res => {\n          loading.dismiss().catch(() => { });\n          if (res.code === 200) {\n            this.done(res.msg);\n          } else {\n            this.errorSwt(res.msg)\n          }\n        }, error => {\n          loading.dismiss().catch(() => { });\n        })\n      //  ( \n\n    } else {\n      this.errorSwt('Please, the payment was not successful');\n    }\n\n  }\n}\n"]}